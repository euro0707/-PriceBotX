# PriceBotX 通知機能 要件定義書

## 🔄 更新履歴
- 2025-07-10：UI上の表記を以下の通り変更（仕様変更なし）
  - 「LINE Notify」→「LINE」
  - 「メール通知（Gmail）」→「メール通知」
  - トークン説明文にリンクを追加

## 🎯 目的
ユーザーが「LINE Notify」または「メール通知（Gmail）」を選択して、商品価格が希望価格を下回ったときに通知を受け取れるようにする。

---

## ✅ 通知条件
- 現在価格が希望価格以下になった場合に通知
- 通知ONになっている設定のみ対象

---

## ✅ 通知方法（選択式）

| 通知方法 | 入力項目 | 補足 |
|----------|-----------|------|
| LINE Notify | LINEトークン | ユーザーが https://notify-bot.line.me/my/ で発行 |
| メール通知（Gmail） | メールアドレス | Zapier経由で送信（SMTP不要） |

---

## ✅ 通知設定画面のUI構成

1. 通知方法の選択（LINE / メール）
2. 通知先入力（トークン or メールアドレス）
3. 希望価格入力欄（数値）
4. 通知ON/OFFスイッチ
5. 保存ボタン

---

## ✅ 保存データ構造（JSON形式）

```json
{
  "method": "line" | "email",
  "line_token": "...",
  "email": "...",
  "target_price": 3000,
  "notify_enabled": true
}
```

---

## ✅ Windsurf用プロンプト（通知設定UI生成）

\`\`\`
# PriceBotX 通知設定画面のUIを作成してください

## ページタイトル
通知設定

## 説明
商品が希望価格を下回ったときに通知を受け取るための設定を行います。LINE通知またはメール通知のいずれかを選んでください。

## 構成
- 通知方法の選択（ラジオボタン）
  - 選択肢：LINE Notify / メール通知（Gmail）
  - 選択に応じて、以下の入力欄を表示する
    - LINE選択時 → 「LINE Notify アクセストークン」入力欄
    - メール選択時 → 「通知先メールアドレス」入力欄

- 希望価格の入力（数値入力）
  - プレースホルダ：例）3000

- 通知のON/OFF（トグルスイッチ）

- 保存ボタン（クリック時に現在の設定を保存）

## デザインの希望
- モバイルファースト（縦に並べる）
- 入力漏れ時の簡易バリデーション
- 保存完了後は「設定を保存しました」と表示
- フォーム全体をカード風にまとめて見やすく

## 保存データ構造（JSON形式）
{
  "method": "line" | "email",
  "line_token": "...",     // LINE Notify選択時のみ
  "email": "...",          // メール通知選択時のみ
  "target_price": 3000,
  "notify_enabled": true
}
\`\`\`
